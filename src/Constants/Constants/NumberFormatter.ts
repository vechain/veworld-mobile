export const CachedNumberFormatter: Record<string, Intl.NumberFormat> = {
    // English (US)
    "en-US-2-decimal-true": new Intl.NumberFormat("en-US", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "en-2-decimal-true": new Intl.NumberFormat("en", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // German
    "de-DE-2-decimal-true": new Intl.NumberFormat("de-DE", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "de-2-decimal-true": new Intl.NumberFormat("de", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Spanish
    "es-ES-2-decimal-true": new Intl.NumberFormat("es-ES", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "es-2-decimal-true": new Intl.NumberFormat("es-ES", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // French
    "fr-FR-2-decimal-true": new Intl.NumberFormat("fr-FR", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "fr-2-decimal-true": new Intl.NumberFormat("fr", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Hindi
    "hi-IN-2-decimal-true": new Intl.NumberFormat("hi-IN", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "hi-2-decimal-true": new Intl.NumberFormat("hi", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Italian
    "it-IT-2-decimal-true": new Intl.NumberFormat("it-IT", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "it-2-decimal-true": new Intl.NumberFormat("it", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Japanese
    "ja-JP-2-decimal-true": new Intl.NumberFormat("ja-JP", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "ja-2-decimal-true": new Intl.NumberFormat("ja", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Korean
    "ko-KR-2-decimal-true": new Intl.NumberFormat("ko-KR", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "ko-2-decimal-true": new Intl.NumberFormat("ko", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Dutch
    "nl-NL-2-decimal-true": new Intl.NumberFormat("nl-NL", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "nl-2-decimal-true": new Intl.NumberFormat("nl", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Polish
    "pl-PL-2-decimal-true": new Intl.NumberFormat("pl-PL", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "pl-2-decimal-true": new Intl.NumberFormat("pl", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Portuguese
    "pt-PT-2-decimal-true": new Intl.NumberFormat("pt-PT", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "pt-2-decimal-true": new Intl.NumberFormat("pt", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Russian
    "ru-RU-2-decimal-true": new Intl.NumberFormat("ru-RU", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "ru-2-decimal-true": new Intl.NumberFormat("ru", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Swedish
    "sv-SE-2-decimal-true": new Intl.NumberFormat("sv-SE", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "sv-2-decimal-true": new Intl.NumberFormat("sv", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Turkish
    "tr-TR-2-decimal-true": new Intl.NumberFormat("tr-TR", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "tr-2-decimal-true": new Intl.NumberFormat("tr", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Traditional Chinese (Taiwan)
    "zh-TW-2-decimal-true": new Intl.NumberFormat("zh-TW", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "tw-2-decimal-true": new Intl.NumberFormat("zh-TW", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Vietnamese
    "vi-VN-2-decimal-true": new Intl.NumberFormat("vi-VN", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "vi-2-decimal-true": new Intl.NumberFormat("vi", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),

    // Simplified Chinese
    "zh-CN-2-decimal-true": new Intl.NumberFormat("zh-CN", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
    "zh-2-decimal-true": new Intl.NumberFormat("zh-CN", {
        style: "decimal",
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
        useGrouping: true,
    }),
}

export const getNumberFormatter = ({
    locale,
    precision,
    style,
    useGrouping,
}: {
    precision?: number
    locale?: Intl.LocalesArgument
    useGrouping?: boolean
    style?: keyof Intl.NumberFormatOptionsStyleRegistry
}) => {
    const _locale = locale ?? "en-US"
    const _precision = precision ?? 0
    const key = `${_locale}-${_precision}-${style}-${useGrouping}`

    if (CachedNumberFormatter[key]) {
        return CachedNumberFormatter[key]
    }

    CachedNumberFormatter[key] = new Intl.NumberFormat(_locale, {
        style,
        minimumFractionDigits: _precision,
        maximumFractionDigits: _precision,
        useGrouping,
    })

    return CachedNumberFormatter[key]
}
