#transactions_manage_urls.yaml
appId: org.vechain.veworld.app
env:
  URL_1: "https://sponsor-testnet.vechain.energy/by/282"
  URL_2: "https://sponsor-testnet.vechain.energy/by/219"
onFlowStart:
  - runFlow: ../setup_reset/setupApp.yaml
onFlowComplete:
  - runFlow: ../setup_reset/resetApp.yaml
---
## User can add a delegation URL with the Manage URLs button
- tapOn:
    id: "settings-tab"
## Use the repeat button to avoid that the back button on the header is
## temporary hidden by a notification snackbar and cause the flaw to fail
- repeat:
    while:
      visible:
          id: "BackButtonHeader-BaseIcon-backButton-wrapper"
    commands:
      - tapOn:
          id: "BackButtonHeader-BaseIcon-backButton-wrapper"
- tapOn:
    id: "Transactions"
- tapOn:
    id: "Manage_Transactions_Urls"
## Use the repeat button to avoid that the add button on the header is
## temporary hidden by a notification snackbar and cause the flaw to fail
- repeat:
    while:
      visible:
          id: "BackButtonHeader-BaseIcon-backButton-wrapper"
    commands:
      - tapOn:
          id: "ManageUrls_addUrlButton-wrapper"
- tapOn:
    id: "AddUrl_input"
- inputText: "${URL_1}"
- tapOn:
    id: "Add_URL_Submit"
## User can add multiple delegation URLs with the Manage URLs button
## Use the repeat button to avoid that the add button on the header is
## temporary hidden by a notification snackbar and cause the flaw to fail
- repeat:
    while:
      visible:
          id: "BackButtonHeader-BaseIcon-backButton-wrapper"
    commands:
      - tapOn:
          id: "ManageUrls_addUrlButton-wrapper"
- tapOn:
    id: "AddUrl_input"
- inputText: "${URL_2}"
- tapOn:
    id: "Add_URL_Submit"
- assertVisible: "${URL_1}"
- assertVisible: "${URL_2}"
## User can delete delegation URLs
- swipe:
    from:
      id: "Delegation_Url_0"
      index: 0
    direction: "LEFT"
- tapOn:
    id: "DeleteUnderlay_DeleteIcon-wrapper"
- assertNotVisible: "${URL_1}"
- assertVisible: "${URL_2}"
