#tokenManagement
appId: org.vechain.veworld.app
env:
 TOKEN_NAME_ADDRESS: "0xeDecAa0Ad8d93d6167D647A0105f2d93d8270124"
 TOKEN_NAME2_ADDRESS: "0xC9e1B9B34e02610d27Bf213ecbf527D608CE3D39"
 CARP_TOKEN_ADRESS: "0x8a9844e4750f5ce5f7988c4d1e04c278c718feea"
---
- launchApp:
    clearState: true
##welcome screen
- tapOn:
    id: "dev_demo"
- tapOn:
    id: "settings-tab"
- tapOn:
    id: "Networks"
- tapOn:
    id: "networks_box_mainnet"
- tapOn:
    id: "networks_box_testnet"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "wallet-tab"
##User selects an official token
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
    id: "PLA"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- assertVisible: "Plair 0.00  PLA"
##User selects multiple official tokens
- assertVisible: 
     id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
     id: "EditTokensBar_BaseIcon_manageToken"
- swipe:
    from:
        id: "PLA"
    direction: "UP"
- tapOn:
    id: "JUR"
- tapOn:
    id: "YEET"
- repeat:
    while:
      notVisible: 
        id: "BackButtonHeader-BaseIcon-backButton"
    commands:
      - tapOn: 
          id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- swipe:
    from:
      id: "sendButton"
    direction: "UP"
- assertVisible: "Jur 0.00  JUR"
- extendedWaitUntil:
    visible: "Yeet Coin 0.00  YEET"
    timeout: 10000 
- swipe:
    direction: "DOWN"
##User can unselect official tokens
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
    id: "JUR"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- swipe:
    from:
      id: "sendButton"
    direction: "UP"
- assertNotVisible:
    id: "JUR"
##User search for a token and only that token comes in the list
- swipe:
    direction: "DOWN"
- tapOn:
     id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
     id: "ManageTokenScreen_SearchInput_searchTokenInput"
- inputText: "PLAIR"
- assertVisible:
    id: "PLA"
##User add a custom token
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
    id: "ManageTokenScreen_AddCustomToken_Button"
- tapOn:
    id: "AddCustomTokenBottomSheet-TextInput-Address"
- inputText: ${CARP_TOKEN_ADRESS}
- tapOn: "Add"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- swipe:
    from:
      id: "sendButton"
    direction: "UP"
- assertVisible: ".*CARP CarpToken.*"
##User add multiple custom tokens and delete one of them
- tapOn:
    id: "wallet-tab"
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
    id: "ManageTokenScreen_AddCustomToken_Button"
- tapOn:
    id: "AddCustomTokenBottomSheet-TextInput-Address"
- inputText: "0xeDecAa0Ad8d93d6167D647A0105f2d93d8270124"
- assertVisible: "TEST Test_Token TEST"
- tapOn: "Add"
- tapOn:
    id: "ManageTokenScreen_AddCustomToken_Button"
- tapOn:
    id: "AddCustomTokenBottomSheet-TextInput-Address"
- inputText: "0xC9e1B9B34e02610d27Bf213ecbf527D608CE3D39"
- assertVisible: "TEST Test_Token_2 TEST2"
- tapOn: "Add"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- swipe:
    from:
      id: "sendButton"
    direction: "UP"
- assertVisible: "TEST Test_Token 0.00  TEST"
- assertVisible: "TEST Test_Token_2 0.00  TEST2"
- runFlow:
    when:
      platform: Android
    commands:
      - swipe:
         from: "TEST Test_Token 0.00  TEST"
         direction: "LEFT"
- runFlow:
    when:
      platform: iOS
    commands:
      - swipe:
         from: "TEST Test_Token 0.00  TEST"
         direction: "LEFT"
- tapOn:
    id: "DeleteUnderlay_DeleteIcon"
- tapOn: "REMOVE"
- swipe:
    direction: "UP"
- assertNotVisible: "TEST Test_Token 0.00  TEST"
- swipe:
    direction: "DOWN"
##When the user add an official token and then it change network it should not throw the error
- tapOn:
    id: "settings-tab"
- tapOn:
    id: "Networks"
- tapOn:
    id: "networks_box_testnet"
- tapOn:
    id: "networks_box_mainnet"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "wallet-tab"
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- tapOn:
    id: "SHA"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "settings-tab"
- tapOn:
    id: "Networks"
- tapOn:
    id: "networks_box_mainnet"
- tapOn:
    id: "networks_box_testnet"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "wallet-tab"
- tapOn:
    id: "EditTokensBar_BaseIcon_manageToken"
- swipe:
    from:
      id: "PLA"
    direction: "UP"
- tapOn:
    id: "JUR"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "settings-tab"
- tapOn:
    id: "Networks"
- tapOn:
    id: "networks_box_testnet"
- tapOn:
    id: "networks_box_mainnet"
- tapOn:
    id: "BackButtonHeader-BaseIcon-backButton"
- tapOn:
    id: "wallet-tab"
- assertVisible: "Your tokens"